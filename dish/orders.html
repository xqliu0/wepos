<!DOCTYPE html>
<html ng-app="webpos" class="ng-scope nprogress-busy"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style type="text/css">@charset "UTF-8";[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\:form{display:block;}</style>
<meta charset="utf-8">
<meta content="" name="keywords">
<meta content="" name="description">
<meta content="" name="author">
<meta content="production" name="env">
<meta content="" name="mobile_device">
<meta content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" name="viewport">
<meta content="IE=EmulateIE9" http-equiv="X-UA-Compatible">
<meta content="authenticity_token" name="csrf-param">

<link href="./css/webpos.css" media="all" rel="stylesheet">

<title>云餐厅收银系统</title>
</head>
<body>
<!-- ngView:  -->
<div ng-view="" style="height: 100%;" class="ng-scope">
<!--#include file="header.html"-->
<!--#include file="footer.html"-->
<!--#include file="keyboard.html"-->

<div class="orders-index-page main-view ng-scope">
  
  <div class="master-part ng-scope scroll-wrapper" ng-controller="orderChooseCell" wp-scroll-zone=""  style="overflow:auto;overflow-x:hidden">
  <!-- ngIf: vip_info -->
  <div style="transition-timing-function: cubic-bezier(0.1, 0.57, 0.1, 1); -webkit-transition-timing-function: cubic-bezier(0.1, 0.57, 0.1, 1); transition-duration: 0ms; -webkit-transition-duration: 0ms; transform: translate(0px, 0px) translateZ(0px);"><div class="order-types-index">
    <div id="search_all" class="wp-btn-block wp-btn ng-scope"   onclick="search_by_order_type('search_all')"  ng-hide="bind_reservation_order &amp;&amp; order_type.value != &#39;Diandanbao::ReservationOrder&#39;"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-binding ng-scope">
            所有订单
            </span><span class="point-number ng-binding ng-scope ng-hide" ></span>
    </div></div></div>
    
    <div id="search_wepos" class="wp-btn-block wp-btn ng-scope"   onclick="search_by_order_type('search_wepos')"  ng-hide="bind_reservation_order &amp;&amp; order_type.value != &#39;Diandanbao::ReservationOrder&#39;"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-binding ng-scope">
            堂点订单
            </span><span class="point-number ng-binding ng-scope" >4</span>
    </div></div></div>
     <div id="search_fastfood" class="wp-btn-block wp-btn ng-scope"   onclick="search_by_order_type('search_fastfood')"  ng-hide="bind_reservation_order &amp;&amp; order_type.value != &#39;Diandanbao::ReservationOrder&#39;"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-binding ng-scope">
            快餐订单
            </span><span class="point-number ng-binding ng-scope" ></span>
    </div></div></div>
    <div id="search_preorder" class="wp-btn-block wp-btn ng-scope"   onclick="search_by_order_type('search_preorder')"  ng-hide="bind_reservation_order &amp;&amp; order_type.value != &#39;Diandanbao::ReservationOrder&#39;"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-binding ng-scope">
            预订订单
            </span><span class="point-number ng-binding ng-scope" ></span>
    </div></div></div>
    <div id="search_delivery" class="wp-btn-block wp-btn ng-scope"   onclick="search_by_order_type('search_delivery')"  ng-hide="bind_reservation_order &amp;&amp; order_type.value != &#39;Diandanbao::ReservationOrder&#39;"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-binding ng-scope">
            外卖订单
            </span><span class="point-number ng-binding ng-scope ng-hide" ></span>
    </div></div></div>
    <div id="search_buyorder" class="wp-btn-block wp-btn ng-scope"   onclick="search_by_order_type('search_buyorder')"  ng-hide="bind_reservation_order &amp;&amp; order_type.value != &#39;Diandanbao::ReservationOrder&#39;"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-binding ng-scope">
            买单订单
            </span><span class="point-number ng-binding ng-scope ng-hide" ></span>
    </div></div></div>
    <div style="display:none" class="wp-btn-block wp-btn ng-scope"   ng-click="change_active_order_type(order_type)"  ng-hide="bind_reservation_order &amp;&amp; order_type.value != &#39;Diandanbao::ReservationOrder&#39;"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-binding ng-scope">
            团购订单
            </span><span class="point-number ng-binding ng-scope ng-hide" ></span>
    </div></div></div>


    <div id="key-order-id" class="wp-btn-block wp-btn active"  onclick="search_by_key('key-order-id')" ><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope active">按单号</span></div></div></div>

    <div id="key-table-id" class="wp-btn-block wp-btn"  onclick="search_by_key('key-table-id')" ><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">按桌台</span></div></div></div>

    <div id="key-order-date" class="wp-btn-block wp-btn"  onclick="search_by_key('key-order-date')" ><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">按预订日期</span></div></div></div>

    <div id="key-delivery-date" class="wp-btn-block wp-btn "  onclick="search_by_key('key-delivery-date')" ><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">按外送时间</span></div></div></div>

    <div id="key-filter-order" class="wp-btn-block wp-btn"  onclick="search_by_key('key-filter-order')" ><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">过滤订单</span></div></div></div>
    <div class="wp-btn-block wp-btn ng-hide" ng-click="set_flag(&#39;is_batch_op&#39;)"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">批量操作</span></div></div></div>

    <div class="space"></div>

    <div id="filter-order" ng-show="is_filter" class="ng-hide">
      <div class="wp-subject">过滤订单</div>
      <div class="wp-form-group">
      <div class="wp-form-select">
        <select id="filter-order-order-type" class="wp-form-select-small ng-pristine ng-untouched ng-valid" ng-model="order_type">
            <option value="0"  class="ng-binding ng-scope">所有订单</option>
            <option value="3"  class="ng-binding ng-scope">堂点订单</option>
            <option value="6"  class="ng-binding ng-scope">预订订单</option>
            <option value="4"  class="ng-binding ng-scope">外卖订单</option>
            <option value="5"  class="ng-binding ng-scope">买单订单</option>
        </select>
      </div>
      <div class="wp-form-select">
        <select id="filter-order-order-state" class="wp-form-select-small ng-pristine ng-untouched ng-valid" ng-model="order_state">
            <option value="0">订单状态</option>
            <option value="1"  class="ng-binding ng-scope">待处理</option>
            <option value="2"  class="ng-binding ng-scope">已确认</option>
            <option value="3"  class="ng-binding ng-scope">已完成</option>
        </select>
      </div>
      <div class="wp-form-select">
        <select id="filter-order-order-pay-method" class="wp-form-select-small ng-pristine ng-untouched ng-valid" ng-model="pay_method">
            <option value="0">支付方式</option>
            <option value="1"  class="ng-binding ng-scope">支付宝</option>
            <option value="2"  class="ng-binding ng-scope">微信支付</option>
            <option value="3"  class="ng-binding ng-scope">货到付款</option>
            <option value="4"  class="ng-binding ng-scope">当面付款</option>
        </select>
        <select id="filter-order-order-pay-state" class="wp-form-select-small ng-pristine ng-untouched ng-valid" ng-model="pay_item_state">
          <option value="0">支付状态</option>
          <option value="1">空</option>
          <option value="2">未支付</option>
          <option value="3">已支付</option>
        </select>
      </div>
        <div class="wp-form-action">
          <div class="wp-btn-block wp-btn"  onclick="filter()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">过滤</span></div></div></div>
        </div>
      </div>
    </div>

    <div ng-show="is_batch_op" class="ng-hide">
      <div class="wp-subject">选择后点击您要的操作</div>
      <div class="wp-btn-block wp-btn"  ng-click="batch_change_state(&#39;confirmed&#39;)"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">确认</span></div></div></div>
      <div class="wp-btn-block wp-btn"  ng-click="batch_change_state(&#39;completed&#39;)"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">完成</span></div></div></div>
      <div class="wp-btn-block wp-btn"  ng-click="batch_change_state(&#39;canceled&#39;)"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">取消</span></div></div></div>
      <div class="space"></div>
    </div>

    <div id="input-order-id" ng-show="key==&#39;number_cont&#39;" class="">
      <div class="wp-subject">输入订单号(只需输入后六位)</div>
      <div class="wp-form-group">
        <div input-model="search_key" input-type="text" class="ng-isolate-scope"><div class="wp-form-input-keypad  ng-hide" ng-show="enable_jvk &amp;&amp; !is_password()" data-ng-model="input_model" data-ng-keypad-input="text" ng-keypad-restrict=""><span class="ng-binding"></span></div><div class="wp-form-input-keypad  ng-hide" ng-show="enable_jvk &amp;&amp; is_password()" data-ng-model="input_model" data-ng-keypad-input="text" ng-keypad-restrict=""><span class="ng-binding"></span></div><div class="wp-form-input " ng-show="!enable_jvk">
        <input id="inputed-order-id" type="text" ng-model="input_model" placeholder="" class="ng-pristine ng-untouched ng-valid"></div></div>
        <div class="wp-btn-block wp-btn"  onclick="search()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">确定</span></div></div></div>
      </div>
      <div class="space"></div>
    </div>

    <div id="input-table-id"  class="ng-hide">
      <div class="wp-subject">选择桌台</div>
      <div class="wp-form-group">
        <div class="wp-form-select">
          <select id="table_list_zone" class="wp-form-select-small ng-pristine ng-valid ng-touched" ng-model="search_key" onchange="search_by_table_id()">
          </select>
        </div>
      </div>
    </div>

    <div id="input-pre-order-date"   class="ng-hide">
      <div class="wp-subject">选择预定日期</div>
        <div class="wp-form-group">
          <div class="wp-form-select">
            <select id="resvervation-date-list-zone" class="wp-form-select-small ng-pristine ng-valid ng-touched" ng-model="search_key" onchange="search_by_preorder_date()">
            <option value="? object:null ?"></option>
              <option value="2015-10-09"  class="ng-binding ng-scope">今天</option>
              <option value="2015-10-10"  class="ng-binding ng-scope">明天</option>
              <option value="2015-10-11"  class="ng-binding ng-scope">后天</option>
              <option value="2015-10-12"  class="ng-binding ng-scope">10-12</option>
              <option value="2015-10-13"  class="ng-binding ng-scope">10-13</option>
              <option value="2015-10-14"  class="ng-binding ng-scope">10-14</option>
              <option value="2015-10-15"  class="ng-binding ng-scope">10-15</option>
            </select>
          </div>

          <!-- <wp-btn ng-click="reservation()" ng-class="">按预订日期排序</wp-btn> -->

        </div>
    </div>

    <div id="input-pre-delivery-date"  class="ng-hide">
      <div class="wp-subject">选择外送时间</div>
      <div class="wp-form-group">
        <div input-model="search_key" input-type="text" class="ng-isolate-scope"><div class="wp-form-input-keypad  ng-hide" ng-show="enable_jvk &amp;&amp; !is_password()" data-ng-model="input_model" data-ng-keypad-input="text" ng-keypad-restrict=""><span class="ng-binding"></span></div><div class="wp-form-input-keypad  ng-hide" ng-show="enable_jvk &amp;&amp; is_password()" data-ng-model="input_model" data-ng-keypad-input="text" ng-keypad-restrict=""><span class="ng-binding"></span></div><div class="wp-form-input " ng-show="!enable_jvk">
        <input id="inputed-delivery-time" type="text" ng-model="input_model" placeholder="" class="ng-pristine ng-untouched ng-valid"></div></div>
        <div class="wp-btn-block wp-btn"  onclick="searchByDeliveryTime()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">确定</span></div></div></div>
      </div>
      <div class="space"></div>
    </div>
    

  </div><div class="orders-index">
    <div class="wp-subject">订单列表</div>
    <div id="order_list_zone" class="wp-table">
    </div>
    <div class="wp-no-record ng-hide" ng-hide="orders.length &gt; 0">当前尚没有记录</div>
    <div class="wp-paginate ng-isolate-scope ng-hide" ng-show="can_show()" page-model="page_orders"><div class="wp-btn-block wp-btn disabled"  ng-click="load_previous_page()" ng-class="{&#39;disabled&#39;:!can_previous()}"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">上一页</span></div></div></div><div class="disabled wp-btn-block wp-btn"  ng-click="query()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-binding ng-scope">第1页</span></div></div></div><div class="wp-btn-block wp-btn"  ng-click="load_next_page()" ng-class="{&#39;disabled&#39;:!can_next()}"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">下一页</span></div></div></div></div>
  </div></div>
  
</div><!-- end ngIf: action == 'init' -->
  <!-- ngIf: action == 'append_itemable' -->
  <!-- ngIf: action == 'delete_itemable' -->
  <div id="oper-panel" class="op-part order-info scroll-wrapper" wp-scroll-zone=""  style="overflow:auto;overflow-x:hidden">
  <input type="hidden" id="selected-store-id" name="selected-store-id" value="" />
  <input type="hidden" id="selected-table-id" name="selected-table-id" value="" />
  <input type="hidden" id="selected-order-id" name="selected-order-id" value="" />
  
  
    <div style="transition-timing-function: cubic-bezier(0.1, 0.57, 0.1, 1); -webkit-transition-timing-function: cubic-bezier(0.1, 0.57, 0.1, 1); transition-duration: 0ms; -webkit-transition-duration: 0ms; transform: translate(0px, 0px) translateZ(0px);"><div ng-show="action == &#39;append_itemable&#39;" class="ng-hide">
      <!-- ngInclude: partial('_actions/append_itemable_table') --><div ng-include="partial(&#39;_actions/append_itemable_table&#39;)" class="ng-scope"><div class="ng-scope">
  <div class="wp-subject">加菜列表</div>
  <div class="wp-table">
    <div class="wp-table-row" ng-transclude="">
      <div class="wp-table-col col-1 ng-scope">序号</div>
      <div class="wp-table-col col-7 ng-scope">名称</div>
      <div class="wp-table-col col-3 ng-scope">数量</div>
      <div class="wp-table-col col-3 ng-scope">单价</div>
    </div>
    <!-- ngRepeat: itemable in append_itemables -->
  </div>
  <div class="actions">
    <div ng-show="active_append_itemable" class="ng-hide">
      <div class="wp-btn-block wp-btn-sm"  ng-click="add_append_itemable(active_append_itemable)"><div class="text"><div class="overflow-hidden-text" ng-transclude="">
        <i class="fa fa-plus fa-2x gray ng-scope"></i>
      </div></div></div>
      <div class="wp-btn-block wp-btn-sm"  ng-click="remove_append_itemable(active_append_itemable)"><div class="text"><div class="overflow-hidden-text" ng-transclude="">
        <i class="fa fa-minus fa-2x gray ng-scope"></i>
      </div></div></div>
      <div class="wp-btn-block wp-btn-sm"  ng-click="change_append_itemable_note(active_append_itemable)"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">
        品注
      </span></div></div></div>
      <div class="wp-btn-block wp-btn-sm"  ng-click="change_append_itemable_gift(active_append_itemable)" ng-class="{active: active_append_itemable.gift}"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">
        赠菜
      </span></div></div></div>
    </div>
    <div class="clearfix"></div>
    <div class="hover wp-btn-block wp-btn-sm disabled"  ng-class="{&#39;disabled&#39;:!can_append_itemables()}" ng-click="confirm_append_itemables()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">加菜提交</span></div></div></div>
  </div>
</div></div>
    </div><div class="order-info-side" ng-show="order">
      <div class="wp-subject">操作区</div>
      <div>
        <div class="wp-btn-block wp-btn-sm ng-hide"  ng-click="confirm()" ng-show="can_confirm()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">确认</span></div></div></div>
        <div class="wp-btn-block wp-btn"  ng-click="complete()" ng-show="can_complete()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">完成</span></div></div></div>
        <div class="wp-btn-block wp-btn"  ng-click="cancel()" ng-show="can_cancel()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">取消</span></div></div></div>
        <div class="wp-btn-block wp-btn ng-hide"  ng-click="anti_settlement()" ng-show="can_anti_settlement()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">反结账</span></div></div></div>
        <div class="wp-btn-block wp-btn"  ng-click="choose_reprint_targets()" ng-show="can(&#39;reprint&#39;, &#39;printer&#39;)"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">小票补打</span></div></div></div>
        <div class="wp-btn-block wp-btn ng-hide"  ng-click="reservation_order_modal.open()" ng-show="reservation_order_modal.can_open()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">更改信息</span></div></div></div>
        <div class="wp-btn-block wp-btn"  ng-click="go_settle()" ng-class="{&#39;disabled&#39;: !can_go_settle()}" ng-show="can_settle() &amp;&amp; (can_go_settle() || is_role(&#39;worker&#39;))"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">结算</span></div></div></div>
        <div class="wp-btn-block wp-btn disabled ng-hide"  ng-click="reservation_change_modal.open()" ng-show="can(&#39;change_to_eat_in_hall&#39;, &#39;eat_in_hall_order&#39;) &amp;&amp; reservation_change_modal.can_open()" ng-class="{&#39;disabled&#39;: !reservation_change_modal.can_change()}"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">转为堂点</span></div></div></div>
        <div class="wp-btn-block wp-btn ng-hide"  ng-click="delivery_man_modal.open()" ng-show="can(&#39;assign_delivery_man&#39;, &#39;delivery_order&#39;) &amp;&amp; delivery_man_modal.can_open()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">指派配送</span></div></div></div>
        <div class="wp-btn-block wp-btn ng-hide"  ng-click="reservation_bind_table_modal.open()" ng-show="can(&#39;bind_table&#39;, &#39;reservation_order&#39;) &amp;&amp; reservation_bind_table_modal.can_open()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">绑定桌台</span></div></div></div>
        <div class="wp-btn-block wp-btn"  ng-click="toggle_action(&#39;append_itemable&#39;)" ng-class="{&#39;active&#39;:action == &#39;append_itemable&#39;}" ng-show="can_append_itemable()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">加菜</span></div></div></div>
        <div class="wp-btn-block wp-btn"  ng-click="toggle_action(&#39;delete_itemable&#39;)" ng-class="{&#39;active&#39;:action == &#39;delete_itemable&#39;}" ng-show="can(&#39;delete_itemables&#39;, &#39;base_order&#39;) &amp;&amp; can_append_itemable()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">退菜</span></div></div></div>
        <div class="wp-btn-block wp-btn disabled"  ng-click="change_price_modal.open()" ng-class="{&#39;disabled&#39;: !current_line_item}" ng-show="can_append_itemable() &amp;&amp; can_change_price()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">单品改价</span></div></div></div>
        <div class="space"></div>
      </div>
      <div id="store_table_order_info_zone"></div>
      
    </div><div class="space"></div></div>

    
  </div>
</div>

<div class="wp-modal ng-scope ng-isolate-scope ng-hide" ng-show="wpShow" wp-show="reservation_order_modal.show"><div class="wp-modal-mask" ng-click="click_mask()"></div><div class="wp-modal-body" ng-transclude="">
  <div class="wp-form-group ng-scope">
    <div class="wp-form-label">姓名</div>
    <div input-model="reservation_order_modal.order.name" input-type="text" class="ng-isolate-scope"><div class="wp-form-input-keypad  ng-hide" ng-show="enable_jvk &amp;&amp; !is_password()" data-ng-model="input_model" data-ng-keypad-input="text" ng-keypad-restrict=""><span class="ng-binding"></span></div><div class="wp-form-input-keypad  ng-hide" ng-show="enable_jvk &amp;&amp; is_password()" data-ng-model="input_model" data-ng-keypad-input="text" ng-keypad-restrict=""><span class="ng-binding"></span></div><div class="wp-form-input " ng-show="!enable_jvk"><input type="text" ng-model="input_model" placeholder="" class="ng-pristine ng-untouched ng-valid"></div></div>
  </div>
  <div class="wp-form-group ng-scope">
    <div class="wp-form-label">性别</div>
    <div class="wp-form-select">
      <select class="wp-form-select-small ng-pristine ng-untouched ng-valid" ng-model="reservation_order_modal.order.gender" ng-options="gender.value as gender.label for gender in reservation_order_modal.gender_collection"><option value="?" selected="selected" label=""></option><option value="0" label="先生">先生</option><option value="1" label="女士">女士</option></select>
    </div>
  </div>
  <div class="wp-form-group ng-scope">
    <div class="wp-form-label">电话</div>
    <div input-model="reservation_order_modal.order.phone" input-type="text" class="ng-isolate-scope"><div class="wp-form-input-keypad  ng-hide" ng-show="enable_jvk &amp;&amp; !is_password()" data-ng-model="input_model" data-ng-keypad-input="text" ng-keypad-restrict=""><span class="ng-binding"></span></div><div class="wp-form-input-keypad  ng-hide" ng-show="enable_jvk &amp;&amp; is_password()" data-ng-model="input_model" data-ng-keypad-input="text" ng-keypad-restrict=""><span class="ng-binding"></span></div><div class="wp-form-input " ng-show="!enable_jvk"><input type="text" ng-model="input_model" placeholder="" class="ng-pristine ng-untouched ng-valid"></div></div>
  </div>
  <div class="wp-form-group ng-scope">
    <div class="wp-form-label">备注</div>
    <div input-model="reservation_order_modal.order.note" input-type="text" class="ng-isolate-scope"><div class="wp-form-input-keypad  ng-hide" ng-show="enable_jvk &amp;&amp; !is_password()" data-ng-model="input_model" data-ng-keypad-input="text" ng-keypad-restrict=""><span class="ng-binding"></span></div><div class="wp-form-input-keypad  ng-hide" ng-show="enable_jvk &amp;&amp; is_password()" data-ng-model="input_model" data-ng-keypad-input="text" ng-keypad-restrict=""><span class="ng-binding"></span></div><div class="wp-form-input " ng-show="!enable_jvk"><input type="text" ng-model="input_model" placeholder="" class="ng-pristine ng-untouched ng-valid"></div></div>
  </div>
  <div class="wp-form-group ng-scope">
    <div class="wp-form-label"></div>
    <div class="wp-form-action">
      <div class="wp-btn-block wp-btn disabled"  ng-click="reservation_order_modal.submit()" ng-class="{&#39;disabled&#39;: !reservation_order_modal.can_submit()}"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">更改</span></div></div></div>
      <div class="wp-btn-block wp-btn"  ng-click="reservation_order_modal.close()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">取消</span></div></div></div>
      <div class="space"></div>
    </div>
  </div>
</div></div>

<div class="wp-modal ng-scope ng-isolate-scope ng-hide" ng-show="wpShow" wp-show="reservation_change_modal.show"><div class="wp-modal-mask" ng-click="click_mask()"></div><div class="wp-modal-body" ng-transclude="">
  <div class="wp-form-group ng-scope">
    <div class="wp-form-label"></div>
    <div class="wp-form-input">请选择桌台</div>
  </div>
  <div class="wp-form-group ng-scope">
    <div class="wp-form-label">桌台类型</div>
    <div class="wp-form-select">
      <select class="wp-form-select-small ng-pristine ng-untouched ng-valid" ng-model="reservation_change_modal.active_table_zone" ng-options="table_zone as table_zone.name for table_zone in reservation_change_modal.table_zones" ng-change="reservation_change_modal.change_table_zone()"><option value="" selected="selected" label=""></option></select>
    </div>
  </div>
  <div class="wp-form-group ng-scope">
    <div class="wp-form-label">桌台号</div>
    <div class="wp-form-select">
      <select class="wp-form-select-small ng-pristine ng-untouched ng-valid" ng-model="reservation_change_modal.order.table_id" ng-options="table.id as table.name for table in reservation_change_modal.active_table_zone.tables|filter:{workflow_state: &#39;idle&#39;}"><option value="?" selected="selected" label=""></option></select>
    </div>
  </div>
  <div class="wp-form-group ng-scope">
    <div class="wp-form-label">备注</div>
    <div input-model="reservation_change_modal.order.note" input-type="text" class="ng-isolate-scope"><div class="wp-form-input-keypad  ng-hide" ng-show="enable_jvk &amp;&amp; !is_password()" data-ng-model="input_model" data-ng-keypad-input="text" ng-keypad-restrict=""><span class="ng-binding"></span></div><div class="wp-form-input-keypad  ng-hide" ng-show="enable_jvk &amp;&amp; is_password()" data-ng-model="input_model" data-ng-keypad-input="text" ng-keypad-restrict=""><span class="ng-binding"></span></div><div class="wp-form-input " ng-show="!enable_jvk"><input type="text" ng-model="input_model" placeholder="" class="ng-pristine ng-untouched ng-valid"></div></div>
  </div>
  <div class="wp-form-group ng-scope">
    <div class="wp-form-label"></div>
    <div class="wp-form-action">
      <div class="wp-btn-block wp-btn disabled"  ng-click="reservation_change_modal.submit()" ng-class="{&#39;disabled&#39;: !reservation_change_modal.can_submit()}"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">确定</span></div></div></div>
      <div class="wp-btn-block wp-btn"  ng-click="reservation_change_modal.close()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">取消</span></div></div></div>
      <div class="space"></div>
    </div>
  </div>
</div></div>

<div class="wp-modal ng-scope ng-isolate-scope ng-hide" ng-show="wpShow" wp-show="reservation_bind_table_modal.show"><div class="wp-modal-mask" ng-click="click_mask()"></div><div class="wp-modal-body" ng-transclude="">
  <div class="wp-form-group ng-scope">
    <div class="wp-form-label"></div>
    <div class="wp-form-input">请选择桌台</div>
  </div>
  <div class="wp-form-group ng-scope">
    <div class="wp-form-label">桌台号</div>
    <div class="wp-form-select">
      <select class="wp-form-select-small ng-pristine ng-untouched ng-valid" ng-model="reservation_bind_table_modal.table" ng-options="table as table.name for table in reservation_bind_table_modal.tables"><option value="" selected="selected" label=""></option></select>
    </div>
  </div>
  <div class="wp-form-group ng-scope">
    <div class="wp-form-label"></div>
    <div class="wp-form-action">
      <div class="wp-btn-block wp-btn disabled"  ng-click="reservation_bind_table_modal.submit()" ng-class="{&#39;disabled&#39;: !reservation_bind_table_modal.can_submit()}"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">确定</span></div></div></div>
      <div class="wp-btn-block wp-btn"  ng-click="reservation_bind_table_modal.close()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">取消</span></div></div></div>
      <div class="space"></div>
    </div>
  </div>
</div></div>

<div class="wp-modal ng-scope ng-isolate-scope ng-hide" ng-show="wpShow" wp-show="delivery_man_modal.show"><div class="wp-modal-mask" ng-click="click_mask()"></div><div class="wp-modal-body" ng-transclude="">
  <div class="wp-form-group ng-scope">
    <div class="wp-form-label"></div>
    <div class="wp-form-input">请选择配送员</div>
  </div>
  <div class="wp-form-group ng-scope">
    <div class="wp-form-label">配送员</div>
    <div class="wp-form-select">
      <select class="wp-form-select-small ng-pristine ng-untouched ng-valid" ng-model="delivery_man_modal.active_delivery_man" ng-options="delivery_man as delivery_man.name for delivery_man in delivery_man_modal.delivery_mans"><option value="?" selected="selected" label=""></option></select>
    </div>
  </div>
  <div class="wp-form-group ng-scope">
    <div class="wp-form-label"></div>
    <div class="wp-form-action">
      <div class="wp-btn-block wp-btn"  ng-click="delivery_man_modal.submit()" ng-class="{&#39;disabled&#39;: !delivery_man_modal.can_submit()}"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">确定</span></div></div></div>
      <div class="wp-btn-block wp-btn"  ng-click="delivery_man_modal.close()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">取消</span></div></div></div>
      <div class="space"></div>
    </div>
  </div>
</div></div>

<!-- ngInclude: partial('_actions/append_itemable_modal') --><div ng-include="partial(&#39;_actions/append_itemable_modal&#39;)" class="ng-scope"><div class="wp-modal ng-scope ng-isolate-scope ng-hide" ng-show="wpShow" wp-show="append_itemable_modal.show"><div class="wp-modal-mask" ng-click="click_mask()"></div><div class="wp-modal-body" ng-transclude="">
  <div class="wp-modal-header ng-scope">加菜确认</div>
  <div class="wp-modal-content ng-scope">
    <!-- ngRepeat: itemable in append_itemables -->
    <div class="wp-form-group">
      <div class="wp-form-label"></div>
      <div class="wp-form-action">
        <div class="wp-btn-block wp-btn disabled"  ng-click="append_itemable_modal.submit()" ng-class="{&#39;disabled&#39;: !append_itemable_modal.can_submit()}"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">确定</span></div></div></div>
        <div class="wp-btn-block wp-btn"  ng-click="append_itemable_modal.cancel()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">取消</span></div></div></div>

      </div>
    </div>
  </div>
</div></div></div>

<div class="wp-modal ng-scope ng-isolate-scope ng-hide" ng-show="wpShow" wp-show="change_price_modal.show"><div class="wp-modal-mask" ng-click="click_mask()"></div><div class="wp-modal-body" ng-transclude="">
  <div class="wp-modal-header ng-scope">单品改价</div>
  <div class="wp-modal-content ng-scope">
    <div class="wp-form-group">
      <div class="wp-form-label">菜品</div>
      <div class="wp-form-input ng-binding"></div>
    </div>
    <div class="wp-form-group">
      <div class="wp-form-label">原价</div>
      <div class="wp-form-input ng-binding"></div>
    </div>
    <div class="wp-form-group">
      <div class="wp-form-label">改价</div>
      <div input-model="change_price_modal.new_price" input-type="number" input-size="middle" class="ng-isolate-scope"><div class="wp-form-input-keypad wp-form-input-middle ng-hide" ng-show="enable_jvk &amp;&amp; !is_password()" data-ng-model="input_model" data-ng-keypad-input="number" ng-keypad-restrict=""><span class="ng-binding"></span></div><div class="wp-form-input-keypad wp-form-input-middle ng-hide" ng-show="enable_jvk &amp;&amp; is_password()" data-ng-model="input_model" data-ng-keypad-input="text" ng-keypad-restrict=""><span class="ng-binding"></span></div><div class="wp-form-input wp-form-input-middle" ng-show="!enable_jvk"><input type="text" ng-model="input_model" placeholder="" class="ng-pristine ng-untouched ng-valid"></div></div>
    </div>
    <div class="wp-form-group">
      <div class="wp-form-label"></div>
      <div class="wp-form-action">
        <div class="wp-btn-block wp-btn disabled"  ng-click="change_price_modal.submit()" ng-class="{&#39;disabled&#39;: !change_price_modal.can_submit()}"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">确定</span></div></div></div>
        <div class="wp-btn-block wp-btn"  ng-click="change_price_modal.close()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">取消</span></div></div></div>

      </div>
    </div>
  </div>
</div></div>

<!-- ngInclude:  --><div class="wp-modal ng-scope ng-isolate-scope ng-hide" ng-show="wpShow" wp-show="reprint_modal.show"><div class="wp-modal-mask" ng-click="click_mask()"></div><div class="wp-modal-body" ng-transclude="">
  <div class="wp-modal-header ng-scope">小票补打</div>
  <div class="wp-modal-content ng-scope">
    <div class="wp-form-group">
      <div class="wp-form-label">选择打印机</div>
      <div>
        <!-- ngRepeat: target in reprint_targets -->
        <div class="wp-no-record" ng-hide="reprint_targets.length &gt; 0">当前没有可选的打印机</div>
      </div>
    </div>
    <div class="wp-form-group">
      <div class="wp-form-label">备注</div>
      <div input-model="reprint_modal.note" input-type="text" input-size="middle" class="ng-isolate-scope"><div class="wp-form-input-keypad wp-form-input-middle ng-hide" ng-show="enable_jvk &amp;&amp; !is_password()" data-ng-model="input_model" data-ng-keypad-input="text" ng-keypad-restrict=""><span class="ng-binding"></span></div><div class="wp-form-input-keypad wp-form-input-middle ng-hide" ng-show="enable_jvk &amp;&amp; is_password()" data-ng-model="input_model" data-ng-keypad-input="text" ng-keypad-restrict=""><span class="ng-binding"></span></div><div class="wp-form-input wp-form-input-middle" ng-show="!enable_jvk"><input type="text" ng-model="input_model" placeholder="" class="ng-pristine ng-untouched ng-valid"></div></div>
    </div>

    <div class="wp-form-group">
      <div class="wp-form-label"></div>
      <div class="wp-form-action">
        <div class="wp-btn-block wp-btn disabled"  ng-click="reprint_modal.submit()" ng-class="{&#39;disabled&#39;: !reprint_modal.can_submit()}"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">确定</span></div></div></div>
        <div class="wp-btn-block wp-btn"  ng-click="reprint_modal.cancel()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">取消</span></div></div></div>

      </div>
    </div>
  </div>
</div></div>
<!-- ngInclude:  --><div class="wp-modal ng-scope ng-isolate-scope ng-hide" ng-show="wpShow" wp-show="cancel_modal.show"><div class="wp-modal-mask" ng-click="click_mask()"></div><div class="wp-modal-body" ng-transclude="">
  <div class="wp-modal-header ng-binding ng-scope">取消订单</div>
  <div class="wp-modal-content ng-scope">
    <div class="wp-form-group">
      <div class="wp-form-label ng-binding">选择取消订单原因</div>
      <div>
        <!-- ngRepeat: reason in branch.order_cancel_reasons --><div class="wp-btn-block wp-btn ng-scope"  ng-click="cancel_modal.change_reason(reason)" ng-repeat="reason in branch.order_cancel_reasons" ng-class="{&#39;active&#39;: reason == cancel_modal.cancel_reason}"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-binding ng-scope">货物售罄</span></div></div></div><!-- end ngRepeat: reason in branch.order_cancel_reasons --><div class="wp-btn-block wp-btn ng-scope"  ng-click="cancel_modal.change_reason(reason)" ng-repeat="reason in branch.order_cancel_reasons" ng-class="{&#39;active&#39;: reason == cancel_modal.cancel_reason}"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-binding ng-scope">地址无效</span></div></div></div><!-- end ngRepeat: reason in branch.order_cancel_reasons --><div class="wp-btn-block wp-btn ng-scope"  ng-click="cancel_modal.change_reason(reason)" ng-repeat="reason in branch.order_cancel_reasons" ng-class="{&#39;active&#39;: reason == cancel_modal.cancel_reason}"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-binding ng-scope">超出范围</span></div></div></div><!-- end ngRepeat: reason in branch.order_cancel_reasons --><div class="wp-btn-block wp-btn ng-scope"  ng-click="cancel_modal.change_reason(reason)" ng-repeat="reason in branch.order_cancel_reasons" ng-class="{&#39;active&#39;: reason == cancel_modal.cancel_reason}"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-binding ng-scope">无法配送</span></div></div></div><!-- end ngRepeat: reason in branch.order_cancel_reasons --><div class="wp-btn-block wp-btn ng-scope"  ng-click="cancel_modal.change_reason(reason)" ng-repeat="reason in branch.order_cancel_reasons" ng-class="{&#39;active&#39;: reason == cancel_modal.cancel_reason}"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-binding ng-scope">定单无效</span></div></div></div><!-- end ngRepeat: reason in branch.order_cancel_reasons --><div class="wp-btn-block wp-btn ng-scope"  ng-click="cancel_modal.change_reason(reason)" ng-repeat="reason in branch.order_cancel_reasons" ng-class="{&#39;active&#39;: reason == cancel_modal.cancel_reason}"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-binding ng-scope">其他原因</span></div></div></div><!-- end ngRepeat: reason in branch.order_cancel_reasons -->
      </div>
    </div>
    <div class="wp-form-group ng-hide" ng-show="cancel_modal.show_other_reason">
      <div class="wp-form-label">填写其他原因</div>
      <div input-model="cancel_modal.other_reason" input-type="text" input-size="middle" class="ng-isolate-scope"><div class="wp-form-input-keypad wp-form-input-middle ng-hide" ng-show="enable_jvk &amp;&amp; !is_password()" data-ng-model="input_model" data-ng-keypad-input="text" ng-keypad-restrict=""><span class="ng-binding"></span></div><div class="wp-form-input-keypad wp-form-input-middle ng-hide" ng-show="enable_jvk &amp;&amp; is_password()" data-ng-model="input_model" data-ng-keypad-input="text" ng-keypad-restrict=""><span class="ng-binding"></span></div><div class="wp-form-input wp-form-input-middle" ng-show="!enable_jvk"><input type="text" ng-model="input_model" placeholder="" class="ng-pristine ng-untouched ng-valid"></div></div>
    </div>

    <div class="wp-form-group">
      <div class="wp-form-label"></div>
      <div class="wp-form-action">
        <div class="wp-btn-block wp-btn"  ng-click="cancel_modal.submit()" ng-class="{&#39;disabled&#39;: !cancel_modal.can_submit()}"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">确定</span></div></div></div>
        <div class="wp-btn-block wp-btn"  ng-click="cancel_modal.cancel()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">取消</span></div></div></div>

      </div>
    </div>
  </div>
</div></div>
</div>

<!-- ngInclude:  --><div ng-include="" src="partial(&#39;modals&#39;)" class="ng-scope"><div class="wp-modals ng-scope">
  <div class="wp-modal wp-confirm-modal ng-isolate-scope ng-hide" ng-show="wpShow" wp-show="confirm_modal.show" wp-lock-mask="confirm_modal.lock_mask" wp-confirm-info="请检查是否创建门店或门店是否已全部过期" wp-ok-text="确定" wp-cancel-text="" wp-ok="confirm_modal.ok();" wp-cancel="confirm_modal.cancel();"><div class="wp-modal-mask" ng-click="click_mask()"></div><div class="wp-modal-body"><div class="wp-confirm-info ng-binding" ng-bind-html="wpConfirmInfo|unsafe">请检查是否创建门店或门店是否已全部过期</div><div class="wp-confirm-actions"><div class="wp-btn-block wp-btn"  ng-click="wpLockMask=false;wpOk();" ng-show="wpOkText"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-binding ng-scope">确定</span></div></div></div><div class="wp-btn-block wp-btn ng-hide"  ng-click="wpLockMask=false;wpCancel();" ng-show="wpCancelText"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-binding ng-scope"></span></div></div></div> </div></div></div>
</div>
</div>

<div ng-include="" src="partial(&#39;qrcode&#39;)" class="ng-scope"><div class="wp-modal-sm wp-modal ng-scope ng-isolate-scope ng-hide" ng-show="wpShow" wp-show="vip_scan_modal.show"><div class="wp-modal-mask" ng-click="click_mask()"></div><div class="wp-modal-body" ng-transclude="">
  <div class="wp-modal-header ng-binding ng-scope"></div>
  <div class="wp-modal-content ng-scope">
    <div class="wp-form-label ng-binding"></div>
    <div class="clearfix"></div>
    <div class="qrcode">
      <img ng-src="" width="250px" height="250px">
    </div>
    <div class="clearfix"></div>
    <div class="wp-form-label ng-hide" ng-show="vip_scan_modal.scan_success">扫描成功，点击确认进行授权</div>
    <div class="wp-modal-actions left">
      <div class="wp-btn-block wp-btn ng-hide"  ng-click="vip_scan_modal.reload_qrcode()" ng-show="vip_scan_modal.enable_reload"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">刷新</span></div></div></div>
      <div class="wp-btn-block wp-btn"  ng-click="vip_scan_modal.close()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">返回</span></div></div></div>
    </div>
  </div>
</div></div></div>
<!-- ngInclude:  --><div ng-include="" src="partial(&#39;scan&#39;)" class="ng-scope"><div class="wp-modal ng-scope ng-isolate-scope ng-hide" ng-show="wpShow" wp-show="scan_modal.show"><div class="wp-modal-mask" ng-click="click_mask()"></div><div class="wp-modal-body" ng-transclude="">
  <div class="wp-modal-header ng-binding ng-scope"></div>
  <div class="wp-modal-content ng-scope">
    <div class="wp-form-group">
      <div class="wp-form-label ng-binding"></div>
    </div>
    <div class="wp-form-group">
      <div class="wp-form-label ng-binding"></div>
    </div>
    <div class="wp-modal-actions">
      <div class="wp-btn-block wp-btn ng-hide"  ng-click="scan_modal.action()" ng-show="scan_modal.action_name"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-binding ng-scope"></span></div></div></div>
      <div class="wp-btn-block wp-btn"  ng-click="scan_modal.close()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">取消</span></div></div></div>
    </div>
  </div>
</div></div></div>
<!-- ngInclude:  --><div ng-include="" src="partial(&#39;item_notes&#39;)" class="ng-scope"><div class="wp-modal ng-scope ng-isolate-scope ng-hide" ng-show="wpShow" wp-show="item_notes_modal.show"><div class="wp-modal-mask" ng-click="click_mask()"></div><div class="wp-modal-body" ng-transclude="">
  <div class="wp-modal-header ng-scope">品注</div>
  <div class="wp-modal-content ng-scope">
    <div class="wp-form-group">
      <div class="wp-form-label">品注</div>
      <!-- ngRepeat: item_note in item_notes_modal.item_notes -->
    </div>
    <div class="wp-form-group">
      <div class="wp-form-label"></div>
      <div class="wp-form-action">
        <div class="wp-btn-block wp-btn"  ng-click="item_notes_modal.submit()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">确认</span></div></div></div>
        <div class="wp-btn-block wp-btn"  ng-click="item_notes_modal.close()"><div class="text"><div class="overflow-hidden-text" ng-transclude=""><span class="ng-scope">取消</span></div></div></div>
      </div>
    </div>
  </div>
</div></div></div>
<!-- / flash -->



<script type="text/html" id="order_list"> 
 <div class="wp-table-row" ng-transclude="">
        <div class="wp-table-col col-1 ng-scope ng-hide" ng-show="is_batch_op">请选择</div>

        <div class="wp-table-col col-1 ng-scope">序号</div>
        <div class="wp-table-col col-2 ng-scope">订单号</div>
        <div class="wp-table-col col-2 ng-scope ">桌台信息</div>
        <div class="wp-table-col col-2 ng-scope ng-hide" ng-show="lock_in_reservation() || lock_in_delivery()">联系人信息</div>
        <div class="wp-table-col col-3 ng-scope ng-hide" ng-show="lock_in_reservation() || filter_by_reservation_time()">预订时间</div>
        <div class="wp-table-col col-3 ng-scope ng-hide" ng-show="lock_in_delivery()">收货地址</div>
        <div class="wp-table-col col-2 ng-scope">订单总价</div>
        <div class="wp-table-col col-2 ng-scope ng-hide" ng-show="active_order_type == null">订单类型</div>
        <div class="wp-table-col col-2 ng-scope">订单状态</div>
        <div class="wp-table-col col-2 ng-scope">下单方式</div>
        <div class="wp-table-col col-2 ng-scope">支付方式</div>
        <div class="wp-table-col col-2 ng-scope">付款状态</div>
        <div class="wp-table-col col-3 ng-scope">下单时间</div>

      </div>
<% if(order_list.length > 0){%>
	<%for(i=0;i<order_list.length;i++){%>
	
	<div id="order_item_<%=order_list[i].order_id%>" class="wp-table-row ng-scope" ng-transclude=""  onclick="choose_order('<%=order_list[i].order_id%>','<%=order_list[i].store_id%>','<%=order_list[i].table_id%>','<%=order_list[i].order_state%>','<%=order_list[i].order_from%>')" ng-class="{&#39;active&#39;:order == active_order}">
        <div class="wp-table-col col-1 ng-scope ng-hide" mk="true" ng-show="is_batch_op">
          <div class="wp-marker ng-isolate-scope" mk="true" onclick="click_marker(); return;" marked="order.marked"><div class="circle" mk="true"></div></div>
        </div>

        <div class="wp-table-col col-1 ng-binding ng-scope"><%=i+1%></div>
        <div class="wp-table-col col-1 ng-binding ng-scope"><%=order_list[i].order_sn%></div>
        <div class="wp-table-col col-1 ng-binding ng-scope" ><%=order_list[i].buyer_name%></div>
        <div class="wp-table-col col-1 ng-binding ng-scope ng-hide" ></div>
        <div class="wp-table-col col-1 ng-binding ng-scope ng-hide" ></div>
        <div class="wp-table-col col-1 ng-binding ng-scope ng-hide" ></div>
        <div class="wp-table-col col-1 ng-binding ng-scope ng-hide" ></div>
        <div class="wp-table-col col-1 ng-binding ng-scope">￥<%=order_list[i].order_amount%></div>
        <div class="wp-table-col col-1 ng-binding ng-scope ng-hide" ng-show="active_order_type == null">堂点</div>
<% if(order_list[i].order_state == 10){%>        
<div class="wp-table-col col-1 ng-binding ng-scope red" ><%=order_list[i].order_state_str%></div>
 <%}else{%>
<div class="wp-table-col col-1 ng-binding ng-scope green" ><%=order_list[i].order_state_str%></div>
<%}%>
       <div class="wp-table-col col-1 ng-binding ng-scope"><%=order_list[i].order_from_str%></div>
        <div class="wp-table-col col-1 ng-binding ng-scope"><%=order_list[i].wepos_pay_name%></div>
<% if(order_list[i].wepos_pay_state == 20){%>        
<div class="wp-table-col col-1 ng-binding ng-scope green">支付成功</div>
  <%}else{%>
<div class="wp-table-col col-1 ng-binding ng-scope red">未支付</div>
 <%}%>     
		<div class="wp-table-col col-1 ng-binding ng-scope"><%=order_list[i].add_time_str%></div>

      </div>
	<%}%>
<%}%>
</script>

<script type="text/html" id="store_table_list">
<option value=""></option>
<% if(table_class.length > 0){%>
	<%for(i=0;i<table_class.length;i++){%>
		<option value="<%=table_class[i].stc_id;%>" ng-repeat="table in tables" class="ng-binding ng-scope"><%=table_class[i].stc_parent_name;%>-<%=table_class[i].stc_name;%>
   </option>
<%}%>
<%}%>
</script>


<script type="text/html" id="resvervation-date-list">
<option value=""  class="ng-binding ng-scope"></option>
<% if(date_list.length > 0){%>
	<%for(i=0;i<date_list.length;i++){%>
<option value="<%=date_list[i].index%>"  class="ng-binding ng-scope"><%=date_list[i].date_day%></option>
	<%}%>
<%}%>
</script>


<script type="text/html" id="order_detail_info">
<div class="detail-info">
<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">订单编号</div>
          <div class="info-value ng-binding"><%=order_info.order_sn%></div>
        </div>

<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">门店名称</div>
          <div class="info-value ng-binding"><%=order_info.store_name%></div>
        </div>

<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">下单来源</div>
          <div class="info-value ng-binding">收银端</div>
        </div>

  
<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">下单时间</div>
          <div class="info-value ng-binding"><%=order_info.add_time_str%></div>
        </div>

<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">订单状态</div>
          <div class="info-value ng-binding">已确认</div>
        </div>

<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">订单类型</div>
          <div class="info-value ng-binding">堂点</div>
        </div>

<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">支付方式</div>
          <div class="info-value ng-binding">现金 银行卡</div>
        </div>

<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">支付状态</div>
          <div class="info-value ng-binding">已支付</div>
        </div>


<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">桌台信息</div>
          <div class="info-value ng-binding"><%=order_info.buyer_name%></div>
        </div>

<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">配送时间</div>
          <div class="info-value ng-binding"><%=order_info.delivery_time%></div>
        </div>

<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">备注</div>
          <div class="info-value ng-binding"></div>
        </div>

<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">权限减免</div>
          <div class="info-value ng-binding">-100.0</div>
        </div>


<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">合计</div>
          <div class="info-value ng-binding">￥ <%=order_info.order_amount%></div>
        </div>

<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">现金支付</div>
          <div class="info-value ng-binding">￥ 100.00 (收取￥ 300.00, 找零￥ 200.00)</div>
        </div>


<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">银行卡支付</div>
          <div class="info-value ng-binding">￥ 352.00</div>
        </div>

      </div>
</script>



<script type="text/html" id="store_table_order_info">
<div class="order-info-side" ng-show="order">
      <div class="table-table-name ng-binding" ng-show="order.table_name"><%=buyer_name%></div>
      <table class="wp-table-sm" ng-show="order">
        <thead>
          <tr><th width="10%">序号</th>
          <th width="50%">名称</th>
          <th width="15%">数量</th>
          <th width="25%">价格</th>
        </tr></thead>
        <tbody>

<% if(extend_order_goods.length > 0){%>
	<%for(i=0;i<extend_order_goods.length;i++){%>
		<% if(i%2 == 0){%>
		<tr ng-repeat="line_item in order.line_items" ng-class="odd" class="ng-scope odd">
         <%}else{%>
		<tr ng-repeat="line_item in order.line_items" ng-class="odd" class="ng-scope">
		 <%}%>
            <td class="ng-binding"><%=i+1%></td>
            <td class="ng-binding">
              <%=extend_order_goods[i].goods_name%>
              <% if(extend_order_goods[i].note != ''){%>
				<span ng-show="line_item.note" class="ng-binding">[<%=extend_order_goods[i].note%>]</span>
			  <%}%>
              
			  <% if(extend_order_goods[i].gift == '1'){%>
				<span ng-show="itemable.gift" class="red">(赠)</span>
			  <%}%>
            </td>
            <td class="ng-binding"><%=extend_order_goods[i].goods_num%>
			</td>



<% if(extend_order_goods[i].goods_new_price > 0){%>
            <td class="ng-binding"><%=extend_order_goods[i].goods_new_price%>
			<span class="original-price ng-binding" ><%=extend_order_goods[i].goods_price%></span>
			</td>
         <%}else if(extend_order_goods[i].gift=='1'){%>
			<td class="ng-binding"><%=extend_order_goods[i].goods_new_price%>
			<span class="original-price ng-binding" ><%=extend_order_goods[i].goods_price%></span>
			</td>
		 <%}else{%> 
			<td class="ng-binding"><%=extend_order_goods[i].goods_price%></td>
        <%}%> 

          </tr>
	<%}%>
<%}%>
    </tbody>
      </table>
      <div class="table-order-total ng-binding" ng-show="order.total">合计: ￥<%=order_amount%></div>
      <div class="detail-info">

		<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">订单编号</div>
          <div class="info-value ng-binding"><%=order_sn%></div>
        </div>

		<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">门店名称</div>
          <div class="info-value ng-binding"><%=store_name%></div>
        </div>

		<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">下单来源</div>
          <div class="info-value ng-binding"><%=order_from_desc%></div>
        </div>

		<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">下单时间</div>
          <div class="info-value ng-binding"><%=add_time%></div>
        </div>

		<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">订单状态</div>
          <div class="info-value ng-binding"><%=order_state%></div>
        </div>

		<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">订单类型</div>
          <div class="info-value ng-binding"><%=order_from_str%></div>
        </div>

		<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">支付方式</div>
          <div class="info-value ng-binding"><%=wepos_pay_name%></div>
        </div>

		<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">支付状态</div>
          <div class="info-value ng-binding"><%=wepos_pay_state_desc%></div>
        </div>

		<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">桌台信息</div>
          <div class="info-value ng-binding"><%=buyer_name%></div>
        </div>

<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">配送时间</div>
          <div class="info-value ng-binding"><%=deliver_time%></div>
        </div>

		<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">备注</div>
          <div class="info-value ng-binding"></div>
        </div>

		<div class="detail-info-item ng-scope" ng-repeat="info_item in order.info_items">
          <div class="info-name ng-binding">合计</div>
          <div class="info-value ng-binding">￥<%=order_amount%></div>
        </div>

      </div>
      <div class="space"></div>
    </div>
</script>


<script src="./js/zepto.min.js"></script>
<script src="./js/simple-plugin.js"></script>
<script src="./js/common.js"></script>
<script src="./js/template.js"></script>
<script src="./js/wepos.js"></script>
<script src="./js/orders.js"></script>


<script src="./js/jquery.1.7.2.min.js"></script>
    <script src="./js/mobiscroll_002.js" type="text/javascript"></script>
	<script src="./js/mobiscroll_004.js" type="text/javascript"></script>
	<link href="./css/mobiscroll_002.css" rel="stylesheet" type="text/css">
	<link href="./css/mobiscroll.css" rel="stylesheet" type="text/css">
	<script src="./js/mobiscroll.js" type="text/javascript"></script>
	<script src="./js/mobiscroll_003.js" type="text/javascript"></script>
	<script src="./js/mobiscroll_005.js" type="text/javascript"></script>
	<link href="./css/mobiscroll_003.css" rel="stylesheet" type="text/css">
	
<script>
getStoreOrderLists();
get_query_condition();

$(function () {
	var currYear = (new Date()).getFullYear();	
	var opt={};
	opt.date = {preset : 'date'};
	opt.datetime = {preset : 'datetime'};
	opt.time = {preset : 'time'};
	opt.default = {
		theme: 'android-ics light', //皮肤样式
        display: 'modal', //显示方式 
        mode: 'scroller', //日期选择模式
		dateFormat: 'yyyy-mm-dd',
		lang: 'zh',
		showNow: true,
		nowText: "今天",
        startYear: currYear - 10, //开始年份
        endYear: currYear + 10 //结束年份
	};

  	$("#inputed-delivery-time").mobiscroll($.extend(opt['date'], opt['default']));
  	//var optDateTime = $.extend(opt['datetime'], opt['default']);
  	//var optTime = $.extend(opt['time'], opt['default']);
    //$("#inputed-delivery-time1").mobiscroll(optDateTime).datetime(optDateTime);
});

</script>

</body>
</html>